<div class="container">
  
    <div id="section">
      <mat-card style="padding: 10px">
        <mat-card-title>Order detail</mat-card-title>
        <mat-card-content>
          <form [formGroup]="form">
            <fieldset [disabled]="!editable" class="order-form-container">
              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Order ID</h3>
                <mat-form-field appearance="outline" style="width: 300px">
                  <input matInput placeholder="ID" formControlName="id" />
                </mat-form-field>
              </div>
              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Order name</h3>
                <mat-form-field appearance="outline" style="width: 300px">
                  <input matInput placeholder="Name" formControlName="name" />
                </mat-form-field>
              </div>
              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Customer name</h3>
                <mat-form-field appearance="outline" style="width: 300px">
                  <input
                    matInput
                    placeholder="Customer name"
                    formControlName="customerName"
                  />
                </mat-form-field>
              </div>
              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Due date</h3>
                <mat-form-field appearance="outline" style="width: 300px">
                  <input
                    matInput
                    value="{{ this.orderDueDate | date : 'd.M.y' }}"
                  />
                </mat-form-field>
              </div>

              
              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Recipe</h3>
                <mat-form-field appearance="outline" style="width: 300px">
                  <mat-select
                    placeholder="Recipe"
                    [(ngModel)]="selectedRecipe"
                    [ngModelOptions]="{ standalone: true }"
                    [disabled]="!editable"
                    required
                    #recipeSelect
                  >
                    <mat-select-trigger>
                      <span
                        >{{ selectedRecipe?.id }} -
                        {{ selectedRecipe?.name }}</span
                      >
                    </mat-select-trigger>
                    <ng-container *ngFor="let recipe of recipes">
                      <mat-option [value]="recipe">
                        {{ recipe.id }} - {{ recipe.name }}                        
                      </mat-option>                      
                    </ng-container>
                  </mat-select>
                </mat-form-field>
              </div>
              <!--        </ng-template>-->
              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Quantity</h3>
                <mat-form-field appearance="outline" style="width: 300px">
                  <input
                    matInput
                    placeholder="Quantity"
                    type="number"
                    min="0"
                    formControlName="quantity"
                  />
                  <span matSuffix>kg</span>
                </mat-form-field>
              </div>

              <div
                style="flex-direction: column; width: 100%; margin-bottom: 20px"
                *ngIf="selectedRecipe?.components"
                [@grow]
              >
                <mat-list>
                  <div style="width: 100%; display: flex">
                    <h2>Components/Recipe</h2>
                  </div>
                  <ng-container
                    *ngFor="
                      let component of orderComponent?.components;
                      let i = index
                    "
                    ;
                  >
                    <mat-list-item>
                      <div matLine>
                        <div style="width: 100%; display: flex">
                          <!-- <p style="float: left"> -->
                          <mat-form-field
                            appearance="outline"
                            style="width: 100px"
                            class="note"
                          >
                            <mat-label>ID</mat-label>
                            <input
                              matInput
                              placeholder="0000000001"
                              readonly
                              [value]="component.id"
                            />
                          </mat-form-field>
                          <mat-form-field
                            appearance="outline"
                            style="width: 250px"
                            class="note"
                          >
                            <mat-label>Name</mat-label>
                            <input
                              matInput
                              placeholder="0000000001"
                              readonly
                              [value]="component.name"
                            />
                          </mat-form-field>
                          <mat-form-field
                            appearance="outline"
                            style="width: 100px"
                            class="note"
                          >
                            <mat-label>Weight</mat-label>
                            <input
                              matInput
                              placeholder="0000000001"
                              readonly
                              [value]="component.componentSP.toFixed(3)"
                            />
                            <span matSuffix>KG</span>
                          </mat-form-field>
                          <mat-form-field
                            appearance="outline"
                            style="width: 100px"
                            class="note"
                          >
                            <mat-label>Packing</mat-label>
                            <input
                              matInput
                              placeholder="0000000001"
                              readonly
                              [value]="component.packing.toFixed(1)"
                            />
                            <span matSuffix>KG</span>
                          </mat-form-field>

                          <ng-container>
                            <mat-form-field
                              appearance="outline"
                              style="width: 100px"
                              class="note"
                            >
                              <mat-label>Packing</mat-label>
                              <mat-select
                                [ngModel]="component.packingOrder"
                                [ngModelOptions]="{ standalone: true }"
                              >
                                <mat-option
                                  *ngFor="let packingOrder of packingOrders"
                                  [value]="packingOrder.value"
                                  [disabled]="!editable"
                                >
                                  {{ packingOrder.viewValue }}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </ng-container>

                          <mat-form-field
                            appearance="outline"
                            style="width: 100px"
                            class="note"
                          >
                            <mat-label>Weight Order</mat-label>
                            <input
                              matInput
                              placeholder="0000000001"
                              [value]="
                                component.componentSP *
                                  (this.form.value.quantity / 100)
                                  | number : '1.3-3'
                              "
                            />
                            <span matSuffix>KG</span>
                          </mat-form-field>

                          <!-- [(ngModel)]="this.orderComponent.length <= i   ? this.packingOrderValue[i] = 0: this.packingOrderValue[i] = this.orderComponent[i].packingOrder "      -->
                          <!-- </p> -->
                        </div>
                      </div>
                    </mat-list-item>
                    <!-- <mat-divider *ngIf="i !== selectedRecipe!.components!.length! - 1"></mat-divider> -->
                  </ng-container>

                  <span
                    style="margin: auto"
                    *ngIf="selectedRecipe!.components?.length === 0"
                    >No components in this recipe.</span
                  >
                </mat-list>
              </div>

              

              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3"> Mixer ID</h3>
                <mat-form-field appearance="outline">
                  <mat-select
                    formControlName="idMixer"
                    placeholder="Mixer ID"
                 
                    min="1"
                    max="3"
                    type="number"
                  >
                    <mat-option
                      *ngFor="let slecetIdMixer of slecetIdMixers"
                      [value]="slecetIdMixer.value"
                    >
                      {{ slecetIdMixer.viewValue }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Mixing time</h3>
                <mat-form-field appearance="outline" >
                  <input
                    matInput
                    placeholder="Mixing time"
                    type="number"
                    min="1"
                    formControlName="mixingTime"
                  />
                  <span matSuffix>min</span>
                </mat-form-field>
              </div>

              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Packing machine ID</h3>
                <mat-form-field appearance="outline" >
                  <input
                    matInput
                    placeholder="Packing machine ID"
                    formControlName="idPackingMachine"
                    min="1"
                    max="8"
                    type="number"
                  />
                </mat-form-field>
              </div>

              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Emptying station ID</h3>
                <mat-form-field appearance="outline" >
                  <input
                    matInput
                    placeholder="Packing machine ID"
                    formControlName="idEmptyingStationBag"
                    min="1"
                    max="4"
                    type="number"
                  />
                </mat-form-field>
              </div>

              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Volume per dose</h3>
                <mat-form-field appearance="outline">
                  <input
                    matInput
                    placeholder="Volume"
                    type="number"
                    min="50"
                    max="700"
                    formControlName="volumePerDose"
                  />
                  <span matSuffix>l</span>
                </mat-form-field>
              </div>

              <div class="order-form-field-pdf">
                <h3 class="order-pdf-h3">Operator</h3>
                <mat-form-field appearance="outline" >
                  <input
                    matInput
                    placeholder="Operator"
                    formControlName="operatorName"
                    readonly
                  />
                </mat-form-field>
              </div>
              <div *ngIf="!isNew" class="order-time-container">
                <div class="order-time">
                  <h3 class="order-pdf-h3">Created at</h3>
                  <span>{{
                    order?.createdAt | date : "dd/MM/yyyy HH:mm"
                  }}</span>
                </div>
              </div>
            </fieldset>
          </form>
          
          <div style="flex: 1 1 0;"   *ngIf="this.selectComponents">
            <mat-list >
    
    
              <ng-container *ngFor="let component of this.selectComponents; let i = index" >
                <div *ngIf="!i">
                  <mat-list-item>
                    
                      <mat-form-field appearance="fill" style="width: 405px" class="note ">
                        <input matInput placeholder="000001" readonly value="Components">
                      </mat-form-field>
                      <span class="line"></span>
                      <mat-form-field appearance="fill" style="width: 305px" class="note">
                        <mat-label>Station</mat-label>
                        <input matInput placeholder="000001" readonly value="Palette">
                      </mat-form-field>
    
                      <mat-form-field appearance="fill" style="width: 150px" class="note">
                        <mat-label>Station</mat-label>
                        <input matInput placeholder="000001" readonly value="BigBag line">
                      </mat-form-field>
    
                      <mat-form-field appearance="fill" style="width: 150px" class="note">
                        <mat-label>Station</mat-label>
                        <input matInput placeholder="000001" readonly value="ADS line">
                      </mat-form-field>
    
                      <mat-form-field appearance="fill" style="width: 150px" class="note">
                        <mat-label>Station</mat-label>
                        <input matInput placeholder="000001" readonly value="Liquide">
                      </mat-form-field>
    
                      <mat-form-field appearance="fill" style="width: 150px" class="note">
                        <mat-label>Station</mat-label>
                        <input matInput placeholder="000001" readonly value="Micro">
                      </mat-form-field>
                    
                  </mat-list-item>
                </div>
    
                <mat-list-item>
                  <div matLine>
    
                    
    
                    <mat-form-field appearance="outline" style="width: 150px" class=" note">
                      <mat-label>ID</mat-label>
                      <input matInput placeholder="000001" readonly [value]="component.id">
                    </mat-form-field>
                    <mat-form-field appearance="outline" style="width: 250px" class="note inputSize">
                      <mat-label>Name</mat-label>
                      <input matInput placeholder="Paprika" readonly [value]="component.name">
                    </mat-form-field>
  
                    <mat-form-field appearance="outline" style="width: 150px" class="note">
                      <mat-label>Packing</mat-label>
                      <input matInput placeholder="1" readonly [value]="component.packing.toFixed(1)">
                      <span matSuffix>kg</span>
                    </mat-form-field>
                      <mat-form-field appearance="outline" style="width: 150px" class="note">
                        <mat-label>Quantity</mat-label>
                        <input matInput placeholder="0.1" readonly [value]="this.quantityBag[i]">
                        <span matSuffix>x</span>
                      </mat-form-field>
    
    
                      <mat-form-field appearance="outline" style="width: 150px" class="note">
                        <mat-label>Quantity</mat-label>
                        <input matInput placeholder="0.1" readonly [value]="this.quantityBigBag[i].toFixed(3)">
                        <span matSuffix>kg</span>
                      </mat-form-field>
    
    
                      <mat-form-field appearance="outline" style="width: 150px" class="note">
                        <mat-label>Quantity</mat-label>
                        <input matInput placeholder="0.1" readonly [value]="this.quantityADS[i].toFixed(3)">
                        <span matSuffix>kg</span>
                      </mat-form-field>
    
    
                      <mat-form-field appearance="outline" style="width: 150px" class="note">
                        <mat-label>Quantity</mat-label>
                        <input matInput placeholder="0.1" readonly [value]="this.quantityLiquid[i].toFixed(3)">
                        <span matSuffix>kg</span>
                      </mat-form-field>
    
                      <mat-form-field appearance="outline" style="width: 150px" class="note">
                        <mat-label>Quantity</mat-label>
                        <input matInput placeholder="0.1" readonly [value]="this.quantityMicro[i].toFixed(3)">
                        <span matSuffix>kg</span>
                      </mat-form-field>
    
                   
    
                  </div>
                </mat-list-item>
    
              </ng-container>
              <span style="margin: auto" *ngIf="selectedRecipe!.components?.length === 0">No components in this
                recipe.</span>
            </mat-list>
          </div>
        
        </mat-card-content>
      </mat-card>






    </div>
      <br />
      <br />
    
    <div style="flex: 1 1 0">
      <button mat-button color="primary" (click)="backToOrder()">
        <mat-icon>arrow_back</mat-icon>
        Back to order
      </button>     
      <button mat-button color="primary" [useExistingCss]="true" printSectionId="section" ngxPrint>
        <mat-icon>file_download</mat-icon>
        Print
      </button>
    </div>
  
</div>
